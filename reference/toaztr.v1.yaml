openapi: 3.0.3
tags:
  - name: partner
    x-displayName: partenaire
    description: Gestion des partenaires intervenant dans les dossiers clients
  - name: case
    x-displayName: dossier
    description: Gestion de dossiers clients
  - name: plan_parameters
    x-displayName: financement
    description: Gestion des plans de financement dans un dossier client
  - name: simulation
    description: Gestion des simulations d'un plan de financement dans un dossier client
  - name: score
    description: Calcule le score d'un dossier emprunteur
  - name: standalone_simulation
    x-displayName: simulation
    description: Calcule un plan de financement complet relatif à un projet
  - name: standalone_score
    x-displayName: score
    description: Calcule le score d'un dossier emprunteur
  - name: notary
    x-displayName: notaire
    description: Calcule les frais de notaires
  - name: income_tax
    x-displayName: impots
    description: Calcule le montant d'imposition
  - name: case_model
    x-displayName: dossier
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Case" />
  - name: simulation_model
    x-displayName: simulation
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Simulation" />
x-tagGroups:
  - name: Gestion de dossiers
    tags:
      - partner
      - case
      - plan_parameters
      - simulation
      - score
  - name: APIs de calcul
    tags:
      - standalone_simulation
      - standalone_score
      - notary
      - income_tax
  - name: Modèle
    tags:
      - case_model
      - simulation_model
info:
  contact:
    name: API Support
  description:
    $ref: ./documentation.md
  title: Toaztr API
  version: 1.0.0
  x-logo:
    altText: Toaztr logo
    url: 'https://www.dev.toaztr.com/assets/logos/full_light.svg'
components:
  securitySchemes:
    toaztr_auth:
      type: oauth2
      description: Toaztr utilise [OAuth2](https://oauth.net/2/) afin de fournir une méthode simple et standard d'authorisation.
      flows:
        clientCredentials:
          tokenUrl: 'https://auth.toaztr.com/oauth2/token'
          scopes:
            cases/read: Accès en lecture aux dossiers
            cases/write: Accès en ecriture aux dossiers
            cases/*: Accès complet aux dossiers
            simulations/budget: Accès aux simulations de budget
            simulations/funding: Accès aux simulations de financement
            simulations/debt_consolidation: Accès aux simulations de consolidation de dette
            simulations/pinel: Accès aux simulations pinel
            simulations/*: Accès à toutes les simulations
            scores/*: Accès au scoring
        authorizationCode:
          authorizationUrl: 'https://auth.toaztr.com/oauth2/authorize'
          tokenUrl: 'https://auth.toaztr.com/oauth2/token'
          scopes:
            cases/read: Accès en lecture aux dossiers
            cases/write: Accès en ecriture aux dossiers
            cases/*: Accès complet aux dossiers
            simulations/budget: Accès aux simulations de budget
            simulations/funding: Accès aux simulations de financement
            simulations/debt_consolidation: Accès aux simulations de consolidation de dette
            simulations/pinel: Accès aux simulations pinel
            simulations/*: Accès à toutes les simulations
            scores/*: Accès au scoring
  responses:
    '400':
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '403':
      description: Not authorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '404':
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '409':
      description: Conflict
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '500':
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
  headers:
    ETag:
      schema:
        type: string
      description: Entity tag de la resource
  parameters:
    id:
      name: id
      in: path
      required: true
      schema:
        type: string
      description: ID unique de la resource
    caseId:
      name: caseId
      in: path
      required: true
      schema:
        type: string
      description: ID du dossier parent
    planId:
      name: planId
      in: path
      required: true
      schema:
        type: string
      description: ID des paramètres du plan de financement parent
    IfMatch:
      name: If-Match
      in: header
      required: false
      schema:
        type: string
      description: ETag de la resource
    'page[size]':
      name: 'page[size]'
      in: query
      required: false
      schema:
        type: number
        minimum: 0
        maximum: 20
        default: 10
      description: Taille de la page à retourner
    'page[after]':
      name: 'page[after]'
      in: query
      required: false
      schema:
        type: string
      description: Curseur à partir duquel la page débute
    'page[before]':
      name: 'page[before]'
      in: query
      required: false
      schema:
        type: string
      description: Curseur à partir duquel la page débute
  schemas:
    Resource:
      title: Resource
      type: object
      description: Resource identifiée par son type et son id
      properties:
        id:
          type: string
          description: ID unique de la resource
          readOnly: true
        type:
          type: string
          description: Type de la resource
        attributes:
          type: object
          description: Attributs de la resource
        meta:
          type: object
          description: Meta-données de la resource
          properties:
            etag:
              type: string
              description: ETag de la resource
              readOnly: true
            created_at:
              type: string
              format: date-time
              description: Date de création de la resource
              readOnly: true
            last_updated_at:
              type: string
              format: date-time
              description: Date de dernière update de la resource
              readOnly: true
      required:
        - type
    ErrorResponse:
      title: ErrorResponse
      type: object
      description: Représente une réponse en erreur
      properties:
        errors:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
                description: Type d'erreur
              detail:
                type: string
                description: Détails de l'erreur
              source:
                type: object
                properties:
                  pointer:
                    type: string
                    description: JSON Pointer vers le field en erreur
                  parameter:
                    type: string
                    description: Nom du paramètre en erreur
                  header:
                    type: string
                    description: Nom du header en erreur
    PaginatedResponse:
      title: PaginatedResponse
      type: object
      description: Page de resources
      properties:
        meta:
          type: object
          properties:
            page:
              type: object
              properties:
                cursor:
                  type: string
                  description: Curseur pointant sur le dernier élément de la page
        links:
          type: object
          properties:
            prev:
              type: string
              description: Lien vers la page précédente
            next:
              type: string
              description: Lien vers la prochaine page
    CaseResource:
      title: CaseResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            type:
              type: string
              enum:
                - CASE
            attributes:
              $ref: ../models/Case.v1.json
          required:
            - type
      description: Représente un dossier
    CaseResourceResponse:
      title: CaseResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/CaseResource'
    CaseResourcePaginatedListResponse:
      title: CaseResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/CaseResource'
    PartnerResource:
      title: PartnerResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            type:
              type: string
              enum:
                - PARTNER
            attributes:
              $ref: ../models/Partner.v1.json
          required:
            - type
      description: Représente un partenaire
    PartnerResourceResponse:
      title: PartnerResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/PartnerResource'
    PartnerResourcePaginatedListResponse:
      title: PartnerResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/PartnerResource'
    PlanParametersResource:
      title: PlanParametersResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            type:
              type: string
              enum:
                - PLAN_PARAMETERS
            attributes:
              $ref: ../models/PlanParameters.v1.json
          required:
            - type
      description: Représente les paramètres d'un plan de financement
    PlanParametersResourceResponse:
      title: PlanParametersResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/PlanParametersResource'
    PlanParametersResourcePaginatedListResponse:
      title: PlanParametersResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/PlanParametersResource'
    SimulationResource:
      title: SimulationResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            type:
              type: string
              enum:
                - SIMULATION
            attributes:
              $ref: ../models/Simulation.v1.json
          required:
            - type
      description: Représente une simulation
    SimulationResourceResponse:
      title: SimulationResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/SimulationResource'
    SimulationResourcePaginatedListResponse:
      title: SimulationResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/SimulationResource'
    BudgetSimulationResponse:
      title: BudgetSimulationResponse
      type: object
      properties:
        data:
          $ref: ../models/BudgetResults.v1.json
    FundingSimulationResponse:
      title: FundingSimulationResponse
      type: object
      properties:
        data:
          $ref: ../models/FundingResults.v1.json
    PinelSimulationResponse:
      title: PinelSimulationResponse
      type: object
      properties:
        data:
          $ref: ../models/PinelResults.v1.json
    DebtConsolidationSimulationResponse:
      title: DebtConsolidationSimulationResponse
      type: object
      properties:
        data:
          $ref: ../models/DebtConsolidationResults.v1.json
    ScoreResponse:
      title: ScoreResponse
      type: object
      properties:
        data:
          $ref: ../models/Score.v1.json
    NotaryFeesResponse:
      title: NotaryFeesResponse
      type: object
      properties:
        data:
          $ref: ../models/NotaryFees.v1.json
    IncomeTaxResponse:
      title: IncomeTaxResponse
      type: object
      properties:
        data:
          $ref: ../models/FrenchIncomeTax.v1.json
paths:
  /v1/cases:
    parameters: []
    post:
      operationId: postCase
      tags:
        - case
      description: Crée un dossier
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Case.v1.json
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un dossier
      security:
        - toaztr_auth:
            - cases/write
    get:
      operationId: getCases
      tags:
        - case
      description: Liste les dossiers
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[after]'
        - $ref: '#/components/parameters/page[before]'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Liste les dossiers
      security:
        - toaztr_auth:
            - cases/read
  '/v1/cases/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
    get:
      operationId: getCaseById
      tags:
        - case
      description: Retourne un dossier par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un dossier par ID
      security:
        - toaztr_auth:
            - cases/read
    put:
      operationId: putCase
      tags:
        - case
      description: Mets à jour un dossier par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Case.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour un dossier par ID
      security:
        - toaztr_auth:
            - cases/write
    delete:
      operationId: deleteCase
      tags:
        - case
      description: Supprime un dossier par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un dossier par ID
      security:
        - toaztr_auth:
            - cases/write
  '/v1/cases/{caseId}/plans-parameters':
    parameters:
      - $ref: '#/components/parameters/caseId'
    post:
      operationId: postPlansParameters
      description: Crée un plan
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/PlanParameters.v1.json
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlanParametersResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un plan
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - plan_parameters
    get:
      summary: Liste les plans
      operationId: getPlansParameters
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlanParametersResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      description: Liste les plans
      security:
        - toaztr_auth:
            - cases/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[after]'
        - $ref: '#/components/parameters/page[before]'
      tags:
        - plan_parameters
  '/v1/cases/{caseId}/plans-parameters/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
      - $ref: '#/components/parameters/caseId'
    get:
      operationId: getPlansParametersById
      description: Retourne un plan par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlanParametersResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un plan par ID
      security:
        - toaztr_auth:
            - cases/read
      tags:
        - plan_parameters
    put:
      operationId: putPlansParameters
      description: Mets à jour un plan par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/PlanParameters.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlanParametersResourceResponse'
          description: OK
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour un plan par ID
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - plan_parameters
    delete:
      operationId: deletePlansParameters
      description: Supprime un plan par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un plan par ID
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - plan_parameters
  '/v1/cases/{caseId}/plans-parameters/{planId}/simulations':
    parameters:
      - schema:
          type: string
        name: caseId
        in: path
        required: true
      - schema:
          type: string
        name: planId
        in: path
        required: true
    post:
      summary: Crée une simulation
      operationId: postSimulation
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimulationResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      description: Crée une simulation
      parameters: []
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - simulation
    get:
      summary: Liste les simulations
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimulationResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      operationId: getSimulations
      description: Liste les simulations
      security:
        - toaztr_auth:
            - cases/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[after]'
        - $ref: '#/components/parameters/page[before]'
      tags:
        - simulation
  '/v1/cases/{caseId}/plans-parameters/{planId}/simulations/{id}':
    parameters:
      - $ref: '#/components/parameters/caseId'
      - $ref: '#/components/parameters/planId'
      - $ref: '#/components/parameters/id'
    get:
      summary: Retourne une simulation par ID
      tags:
        - simulation
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimulationResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      operationId: getSimulationById
      description: Retourne une simulation par ID
      security:
        - toaztr_auth:
            - cases/read
    delete:
      summary: Supprime une simulation par ID
      operationId: deleteSimulation
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      description: Supprime une simulation par ID
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - simulation
  /v1/partners:
    parameters: []
    post:
      operationId: postPartner
      tags:
        - partner
      description: Crée un partenaire
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Partner.v1.json
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un partenaire
      security:
        - toaztr_auth:
            - cases/write
    get:
      operationId: getPartenaires
      tags:
        - partner
      description: Liste les partenaires
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[after]'
        - $ref: '#/components/parameters/page[before]'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Liste les partenaires
      security:
        - toaztr_auth:
            - cases/read
  '/v1/partners/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
    get:
      operationId: getPartnerById
      tags:
        - partner
      description: Retourne un partenaire par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un partenaire par ID
      security:
        - toaztr_auth:
            - cases/read
    put:
      operationId: putPartner
      tags:
        - partner
      description: Mets à jour un partenaire par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Partner.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour un partenaire par ID
      security:
        - toaztr_auth:
            - cases/write
    delete:
      operationId: deletePartner
      tags:
        - partner
      description: Supprime un partenaire par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un partenaire par ID
      security:
        - toaztr_auth:
            - cases/write
  /v1/simulations/budget:
    parameters: []
    post:
      operationId: postBudgetSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation de budget
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/BudgetParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BudgetSimulationResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation de budget
      security:
        - toaztr_auth:
            - simulations/budget
  /v1/simulations/funding:
    parameters: []
    post:
      operationId: postFundingSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation de financement
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/FundingParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FundingSimulationResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation de financement
      security:
        - toaztr_auth:
            - simulations/funding
  /v1/simulations/pinel:
    parameters: []
    post:
      operationId: postPinelSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation pinel
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/PinelParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PinelSimulationResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation pinel
      security:
        - toaztr_auth:
            - simulations/pinel
  /v1/simulations/debt_consolidation:
    parameters: []
    post:
      operationId: postDebtConsolidationSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation de consolidation de dettes
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/DebtConsolidationParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DebtConsolidationSimulationResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation de consolidation de dettes
      security:
        - toaztr_auth:
            - simulations/debt_consolidation
  /v1/scores:
    parameters: []
    post:
      operationId: postScore
      tags:
        - standalone_score
      description: Calcule le score d'un dossier
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Case.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScoreResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule le score d'un dossier
      security:
        - toaztr_auth:
            - scores/*
  /v1/compute/notary_fees:
    parameters: []
    post:
      operationId: postNotaryFees
      tags:
        - notary
      description: Calcule les frais de notaires
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/NotaryFeesParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotaryFeesResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule les frais de notaires
      security:
        - toaztr_auth:
            - simulations/*
  /v1/compute/income_tax:
    parameters: []
    post:
      operationId: postIncomeTax
      tags:
        - income_tax
      description: Calcule le montant d'impôts
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/FrenchIncomeTaxParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IncomeTaxResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule le montant d'impôts
      security:
        - toaztr_auth:
            - simulations/*
servers:
  - description: Serveur de production
    url: 'https://api.toaztr.com'
  - description: Server de sandbox
    url: 'https://api.sandbox.toaztr.com'
