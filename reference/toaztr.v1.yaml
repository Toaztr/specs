openapi: 3.0.3
tags:
  - name: partner
    x-displayName: partenaire
    description: Gestion des partenaires intervenant dans les dossiers clients
  - name: case
    x-displayName: dossier
    description: Gestion de dossiers clients
  - name: plan_parameters
    x-displayName: financement
    description: Gestion des plans de financement dans un dossier client
  - name: simulation
    description: Gestion des simulations d'un plan de financement dans un dossier client
  - name: transfer
    x-displayName: transfert
    description: Gestion des transferts
  - name: standalone_simulation
    x-displayName: simulation
    description: Calcule un plan de financement complet relatif à un projet
  - name: standalone_score
    x-displayName: score
    description: Calcule le score d'un dossier emprunteur
  - name: notary
    x-displayName: notaire
    description: Calcule les frais de notaires
  - name: income_tax
    x-displayName: impots
    description: Calcule le montant d'imposition
  - name: subscription
    x-displayName: souscription
    description: Gestion des souscriptions
  - name: license
    description: Informations sur la license courante
  - name: invite
    x-displayName: invitation
    description: Gestion des invitations aux souscriptions
  - name: request_log
    x-displayName: trace
    description: Accès aux requêtes associées d'une souscription
  - name: usage_record
    x-displayName: utilisation
    description: Accès aux enregistrements de l'utilistaion d'une souscription
x-tagGroups:
  - name: Gestion de dossiers
    tags:
      - partner
      - case
      - plan_parameters
      - simulation
      - transfer
  - name: APIs de calcul
    tags:
      - standalone_simulation
      - standalone_score
      - notary
      - income_tax
  - name: Gestion des souscriptions
    tags:
      - subscription
      - invite
      - license
      - request_log
      - usage_record
info:
  contact:
    name: API Support
  description:
    $ref: ./documentation.md
  title: Toaztr API
  version: 1.0.0
  x-logo:
    altText: Toaztr logo
    url: 'https://www.toaztr.com/assets/logos/full_light.svg'
components:
  securitySchemes:
    toaztr_auth:
      type: oauth2
      description: Toaztr utilise [OAuth2](https://oauth.net/2/) afin de fournir une méthode simple et standard d'authorisation.
      flows:
        authorizationCode:
          authorizationUrl: 'https://auth.toaztr.com/oauth2/authorize'
          tokenUrl: 'https://auth.toaztr.com/oauth2/token'
          scopes:
            cases/read: Accès en lecture aux dossiers
            cases/write: Accès en écriture aux dossiers
            cases/*: Accès complet aux dossiers
            simulations/budget: Accès aux simulations de budget
            simulations/funding: Accès aux simulations de financement
            simulations/debt_consolidation: Accès aux simulations de consolidation de dette
            simulations/pinel: Accès aux simulations pinel
            simulations/*: Accès à toutes les simulations
            transfers/read: Accès en lecture aux transferts
            transfers/write: Accès en écriture aux transferts
            transfers/*: Accès complet aux transferts
            scores/*: Accès au scoring
            subscriptions/read: Accès en lecture aux souscriptions
            subscriptions/write: Accès en écriture aux souscriptions
            subscriptions/*: Accès complet aux souscriptions
            license/read: Accès en lecture aux informations de license
            license/write: Accès en écriture aux informations de license
            license/*: Accès complet aux informations de license
  responses:
    '400':
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '403':
      description: Not authorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '404':
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '409':
      description: Conflict
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '500':
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
  headers:
    ETag:
      schema:
        type: string
      description: Entity tag de la ressource
  parameters:
    id:
      name: id
      in: path
      required: true
      schema:
        type: string
      description: ID unique de la ressource
    caseId:
      name: caseId
      in: path
      required: true
      schema:
        type: string
      description: ID du dossier parent
    planId:
      name: planId
      in: path
      required: true
      schema:
        type: string
      description: ID des paramètres du plan de financement parent
    subscriptionId:
      name: subscriptionId
      in: path
      required: true
      schema:
        type: string
      description: ID de la souscription parente
    IfMatch:
      name: If-Match
      in: header
      required: false
      schema:
        type: string
      description: ETag de la ressource
    ordering:
      name: ordering
      in: query
      required: false
      schema:
        type: string
        enum:
          - asc
          - desc
        default: desc
      description: Sens de parcours de la liste
    'page[size]':
      name: 'page[size]'
      in: query
      required: false
      schema:
        type: number
        minimum: 0
        maximum: 100
        default: 10
      description: Taille de la page à retourner
    'page[cursor]':
      name: 'page[cursor]'
      in: query
      required: false
      schema:
        type: string
      description: Curseur à partir duquel la prochaine page débute
  schemas:
    Token:
      title: Token
      type: object
      description: Un token
      properties:
        own:
          type: string
          description: Utilisateur à qui appartient la souscription
        sub:
          type: string
          description: Identifiant de la souscription
        key:
          type: string
          description: Clé de l'objet associé au secret
        secret:
          type: string
          description: Secret
      required:
        - own
        - sub
        - key
        - secret
    TokenHash:
      title: TokenHash
      type: object
      description: Le hash d'un Token
      properties:
        alg:
          type: string 
          description: Type d'algorithme
          enum:
            - pbkdf2-sha256
        it:
          type: number
          description: Nombre d'itération
        hash:
          type: string
          description: Hash du code du token associé
      required:
        - alg
        - it
        - hash
    Resource:
      title: Resource
      type: object
      description: Ressource identifiée par son type et son id
      properties:
        id:
          type: string
          description: ID unique de la ressource
          readOnly: true
        attributes:
          type: object
          description: Attributs de la ressource
        meta:
          type: object
          description: Meta-données de la ressource
          readOnly: true
          properties:
            etag:
              type: string
              description: ETag de la ressource
            created_at:
              type: string
              format: date-time
              description: Date de création de la ressource
            created_by:
              type: string
              description: Utilisateur ayant créé la ressource
            last_updated_at:
              type: string
              format: date-time
              description: Date de dernière modification de la ressource
            last_updated_by:
              type: string
              description: Utilisateur ayant fait la dernière modification de la ressource
    ErrorResponse:
      title: ErrorResponse
      type: object
      description: Représente une réponse en erreur
      properties:
        errors:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
                description: Type d'erreur
              detail:
                type: string
                description: Détails de l'erreur
              source:
                type: object
                properties:
                  pointer:
                    type: string
                    description: JSON Pointer vers le field en erreur
                  parameter:
                    type: string
                    description: Nom du paramètre en erreur
                  header:
                    type: string
                    description: Nom du header en erreur
    PaginatedResponse:
      title: PaginatedResponse
      type: object
      description: Page de ressources
      properties:
        meta:
          type: object
          properties:
            page:
              type: object
              properties:
                cursor:
                  type: string
                  description: Curseur à utiliser pour lister la prochaine page
        links:
          type: object
          properties:
            next:
              type: string
              description: Lien vers la prochaine page
    CaseResource:
      title: CaseResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/Case.v1.json
      description: Représente un dossier
    CaseResourceResponse:
      title: CaseResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/CaseResource'
    CaseResourcePaginatedListResponse:
      title: CaseResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/CaseResource'
    PartnerResource:
      title: PartnerResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/Partner.v1.json
      description: Représente un partenaire
    PartnerResourceResponse:
      title: PartnerResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/PartnerResource'
    PartnerResourcePaginatedListResponse:
      title: PartnerResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/PartnerResource'
    PlanParametersResource:
      title: PlanParametersResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/PlanParameters.v1.json
      description: Représente les paramètres d'un plan de financement
    PlanParametersResourceResponse:
      title: PlanParametersResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/PlanParametersResource'
    PlanParametersResourcePaginatedListResponse:
      title: PlanParametersResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/PlanParametersResource'
    SimulationResource:
      title: SimulationResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/Simulation.v1.json
      description: Représente une simulation
    SimulationResourceResponse:
      title: SimulationResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/SimulationResource'
    SimulationResourcePaginatedListResponse:
      title: SimulationResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/SimulationResource'
    BudgetSimulationResponse:
      title: BudgetSimulationResponse
      type: object
      properties:
        data:
          $ref: ../models/BudgetResults.v1.json
    FundingSimulationResponse:
      title: FundingSimulationResponse
      type: object
      properties:
        data:
          $ref: ../models/FundingResults.v1.json
    PinelSimulationResponse:
      title: PinelSimulationResponse
      type: object
      properties:
        data:
          $ref: ../models/PinelResults.v1.json
    DebtConsolidationSimulationResponse:
      title: DebtConsolidationSimulationResponse
      type: object
      properties:
        data:
          $ref: ../models/DebtConsolidationResults.v1.json
    LMNPSimulationResponse:
      title: LMNPSimulationResponse
      type: object
      properties:
        data:
          $ref: ../models/LMNPResults.v1.json
    ScoreResponse:
      title: ScoreResponse
      type: object
      properties:
        data:
          $ref: ../models/ScoreDetails.v1.json
    NotaryFeesResponse:
      title: NotaryFeesResponse
      type: object
      properties:
        data:
          $ref: ../models/NotaryFees.v1.json
    IncomeTaxResponse:
      title: IncomeTaxResponse
      type: object
      properties:
        data:
          $ref: ../models/FrenchIncomeTaxResults.v1.json
    TransferResource:
      title: TransferResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/Transfer.v1.json
      description: Représente un transfert
    TransferResourceResponse:
      title: TransferResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/TransferResource'
    TransferResourcePaginatedListResponse:
      title: TransferResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/TransferResource'
    SubscriptionResource:
      title: SubscriptionResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/Subscription.v1.json
      description: Représente une souscription
    SubscriptionResourceResponse:
      title: SubscriptionResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/SubscriptionResource'
    SubscriptionResourcePaginatedListResponse:
      title: SubscriptionResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/SubscriptionResource'
    SubscriptionItemResource:
      title: SubscriptionItemResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/SubscriptionItem.v1.json
      description: Représente un item de souscription
    SubscriptionItemResourceResponse:
      title: SubscriptionItemResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/SubscriptionItemResource'
    SubscriptionItemResourcePaginatedListResponse:
      title: SubscriptionItemResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/SubscriptionItemResource'
    SubscriptionInviteResource:
      title: SubscriptionInviteResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/SubscriptionInvite.v1.json
      description: Représente une invitation à une souscription
    SubscriptionInviteResourceResponse:
      title: SubscriptionInviteResourceResponse
      type: object
      properties:
        data:
          $ref: '#/components/schemas/SubscriptionInviteResource'
    SubscriptionInviteResourcePaginatedListResponse:
      title: SubscriptionInviteResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/SubscriptionInviteResource'
    SubscriptionRequestLogResource:
      title: SubscriptionRequestLogResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/SubscriptionRequestLog.v1.json
      description: Représente la trace d'une requête
    SubscriptionRequestLogResourcePaginatedListResponse:
      title: SubscriptionRequestLogResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/SubscriptionRequestLogResource'
    SubscriptionUsageRecordResource:
      title: SubscriptionUsageRecordResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            attributes:
              $ref: ../models/SubscriptionUsageRecord.v1.json
      description: Représente l'enregistrement de l'utilisation d'une souscription
    SubscriptionUsageRecordResourcePaginatedListResponse:
      title: SubscriptionUsageRecordResourcePaginatedListResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/SubscriptionUsageRecordResource'
    RedirectUrlResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            url:
              type: string
          required:
            - url
    LicenseResponse:
      title: LicenseResponse
      type: object
      properties:
        data:
          $ref: ../models/License.v1.json
    LicenseMembersResponse:
      title: LicenseMembersResponse
      type: object
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: ../models/LicenseMember.v1.json
paths:
  /v1/cases:
    parameters: []
    post:
      operationId: postCase
      tags:
        - case
      description: Crée un dossier
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Case.v1.json
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un dossier
      security:
        - toaztr_auth:
            - cases/write
    get:
      operationId: getCases
      tags:
        - case
      description: Liste les dossiers
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Liste les dossiers
      security:
        - toaztr_auth:
            - cases/read
  /v1/cases/by-name:
    get:
      operationId: getCasesByName
      tags:
        - case
      description: Liste les dossiers par leur nom, la recherche n'est pas sensible à la casse
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
        - name: 'filter[name]'
          in: query
          required: false
          schema:
            type: string
          description: Début du nom du dossier
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Liste les dossiers par leur nom
      security:
        - toaztr_auth:
            - cases/read
  '/v1/cases/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
    get:
      operationId: getCaseById
      tags:
        - case
      description: Retourne un dossier par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un dossier par ID
      security:
        - toaztr_auth:
            - cases/read
    put:
      operationId: putCase
      tags:
        - case
      description: Mets à jour un dossier par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Case.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour un dossier par ID
      security:
        - toaztr_auth:
            - cases/write
    delete:
      operationId: deleteCase
      tags:
        - case
      description: Supprime un dossier par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un dossier par ID
      security:
        - toaztr_auth:
            - cases/write
  '/v1/cases/{caseId}/plans-parameters':
    parameters:
      - $ref: '#/components/parameters/caseId'
    post:
      operationId: postPlansParameters
      description: Crée un plan
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/PlanParameters.v1.json
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlanParametersResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un plan
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - plan_parameters
    get:
      summary: Liste les plans
      operationId: getPlansParameters
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlanParametersResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      description: Liste les plans
      security:
        - toaztr_auth:
            - cases/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      tags:
        - plan_parameters
  '/v1/cases/{caseId}/plans-parameters/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
      - $ref: '#/components/parameters/caseId'
    get:
      operationId: getPlansParametersById
      description: Retourne un plan par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlanParametersResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un plan par ID
      security:
        - toaztr_auth:
            - cases/read
      tags:
        - plan_parameters
    put:
      operationId: putPlansParameters
      description: Mets à jour un plan par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/PlanParameters.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlanParametersResourceResponse'
          description: OK
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour un plan par ID
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - plan_parameters
    delete:
      operationId: deletePlansParameters
      description: Supprime un plan par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un plan par ID
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - plan_parameters
  '/v1/cases/{caseId}/plans-parameters/{planId}/simulations':
    parameters:
      - $ref: '#/components/parameters/caseId'
      - $ref: '#/components/parameters/planId'
    post:
      summary: Crée une simulation
      operationId: postSimulation
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimulationResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      description: Crée une simulation
      parameters: []
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - simulation
    get:
      summary: Liste les simulations
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimulationResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      operationId: getSimulations
      description: Liste les simulations
      security:
        - toaztr_auth:
            - cases/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      tags:
        - simulation
  '/v1/cases/{caseId}/plans-parameters/{planId}/simulations/{id}':
    parameters:
      - $ref: '#/components/parameters/caseId'
      - $ref: '#/components/parameters/planId'
      - $ref: '#/components/parameters/id'
    get:
      summary: Retourne une simulation par ID
      tags:
        - simulation
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimulationResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      operationId: getSimulationById
      description: Retourne une simulation par ID
      security:
        - toaztr_auth:
            - cases/read
    delete:
      summary: Supprime une simulation par ID
      operationId: deleteSimulation
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      description: Supprime une simulation par ID
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - simulation
  /v1/partners:
    parameters: []
    post:
      operationId: postPartner
      tags:
        - partner
      description: Crée un partenaire
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Partner.v1.json
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un partenaire
      security:
        - toaztr_auth:
            - cases/write
    get:
      operationId: getPartenaires
      tags:
        - partner
      description: Liste les partenaires
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Liste les partenaires
      security:
        - toaztr_auth:
            - cases/read
  '/v1/partners/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
    get:
      operationId: getPartnerById
      tags:
        - partner
      description: Retourne un partenaire par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un partenaire par ID
      security:
        - toaztr_auth:
            - cases/read
    put:
      operationId: putPartner
      tags:
        - partner
      description: Mets à jour un partenaire par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Partner.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour un partenaire par ID
      security:
        - toaztr_auth:
            - cases/write
    delete:
      operationId: deletePartner
      tags:
        - partner
      description: Supprime un partenaire par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un partenaire par ID
      security:
        - toaztr_auth:
            - cases/write
  /v1/transfers:
    parameters: []
    post:
      operationId: postTransfer
      tags:
        - transfer
      description: Crée un transfert
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Transfer.v1.json
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransferResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un transfert
      security:
        - toaztr_auth:
            - transfers/write
    get:
      operationId: getTransfers
      tags:
        - transfer
      description: Liste les transferts
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransferResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Liste les transferts
      security:
        - toaztr_auth:
            - transfers/read
  '/v1/transfers/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
    get:
      operationId: getTransferById
      tags:
        - transfer
      description: Retourne un transfert par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransferResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un transfert par ID
      security:
        - toaztr_auth:
            - transfers/read
  /v1/simulations/budget:
    parameters: []
    post:
      operationId: postBudgetSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation de budget
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/BudgetParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BudgetSimulationResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation de budget
      security:
        - toaztr_auth:
            - simulations/budget
  /v1/simulations/funding:
    parameters: []
    post:
      operationId: postFundingSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation de financement
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/FundingParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FundingSimulationResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation de financement
      security:
        - toaztr_auth:
            - simulations/funding
  /v1/simulations/pinel:
    parameters: []
    post:
      operationId: postPinelSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation Pinel
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/PinelParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PinelSimulationResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation Pinel
      security:
        - toaztr_auth:
            - simulations/pinel
  /v1/simulations/debt_consolidation:
    parameters: []
    post:
      operationId: postDebtConsolidationSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation de consolidation de dettes
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/DebtConsolidationParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DebtConsolidationSimulationResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation de consolidation de dettes
      security:
        - toaztr_auth:
            - simulations/debt_consolidation
  /v1/simulations/lmnp:
    parameters: []
    post:
      operationId: postLMNPSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation LMNP
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/LMNPParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LMNPSimulationResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation LMNP
      security:
        - toaztr_auth:
            - simulations/lmnp
  /v1/scores:
    parameters: []
    post:
      operationId: postScore
      tags:
        - standalone_score
      description: Calcule le score d'un dossier
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Case.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScoreResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule le score d'un dossier
      security:
        - toaztr_auth:
            - scores/*
  /v1/compute/notary_fees:
    parameters: []
    post:
      operationId: postNotaryFees
      tags:
        - notary
      description: Calcule les frais de notaires
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/NotaryFeesParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotaryFeesResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule les frais de notaires
      security:
        - toaztr_auth:
            - simulations/*
  /v1/compute/income_tax:
    parameters: []
    post:
      operationId: postIncomeTax
      tags:
        - income_tax
      description: Calcule le montant d'impôts
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/FrenchIncomeTaxParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IncomeTaxResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule le montant d'impôts
      security:
        - toaztr_auth:
            - simulations/*
  /v1/subscriptions/checkout:
    parameters: []
    post:
      operationId: checkoutSubscription
      tags:
        - subscription
      description: Checkout une nouvelle souscription
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/SubscriptionCheckoutParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RedirectUrlResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Ouvre une session de checkout
      security:
        - toaztr_auth:
            - subscriptions/write
  /v1/subscriptions:
    parameters: []
    get:
      operationId: getSubscriptions
      tags:
        - subscription
      description: Liste les souscriptions
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Liste les souscriptions
      security:
        - toaztr_auth:
            - subscriptions/read
  '/v1/subscriptions/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
    get:
      operationId: getSubscriptionById
      tags:
        - subscription
      description: Retourne une souscription par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne une souscription par ID
      security:
        - toaztr_auth:
            - subscriptions/read
  '/v1/subscriptions/{id}/manage':
    parameters:
      - $ref: '#/components/parameters/id'
    post:
      operationId: manageSubscription
      tags:
        - subscription
      description: Manage une souscription
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/SubscriptionManageParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RedirectUrlResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Ouvre une session de management de souscription
      security:
        - toaztr_auth:
            - subscriptions/write
  '/v1/subscriptions/{id}/name':
    parameters:
      - $ref: '#/components/parameters/id'
    put:
      operationId: putSubscriptionName
      tags:
        - subscription
      description: Mets à jour le nom d'une souscription
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/SetNameParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour le nom d'une souscription
      security:
        - toaztr_auth:
            - subscriptions/write
  '/v1/subscriptions/{subscriptionId}/items':
    parameters:
      - $ref: '#/components/parameters/subscriptionId'
    post:
      operationId: postSubscriptionItem
      tags:
        - subscription
      description: Crée un item de souscription
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/SubscriptionItem.v1.json
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionItemResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un item de souscription
      security:
        - toaztr_auth:
            - subscriptions/write
    get:
      summary: Liste les items de souscription
      operationId: getSubscriptionItems
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionItemResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      description: Liste les items de souscription
      security:
        - toaztr_auth:
            - subscriptions/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      tags:
        - subscription
  '/v1/subscriptions/{subscriptionId}/items/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
      - $ref: '#/components/parameters/subscriptionId'
    get:
      operationId: getSubscriptionItemById
      description: Retourne un item de souscription par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionItemResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un item de souscription par ID
      security:
        - toaztr_auth:
            - subscriptions/read
      tags:
        - subscription
    delete:
      operationId: deleteSubscriptionItem
      tags:
        - subscription
      description: Supprime un item de souscription par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un item de souscription par ID
      security:
        - toaztr_auth:
            - susbcriptions/write
  '/v1/subscriptions/{subscriptionId}/items/{id}/name':
    parameters:
      - $ref: '#/components/parameters/id'
      - $ref: '#/components/parameters/subscriptionId'
    put:
      operationId: putSubscriptionItemName
      tags:
        - subscription
      description: Mets à jour le nom d'un item de souscription
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/SetNameParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionItemResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour le nom d'un item de souscription
      security:
        - toaztr_auth:
            - subscriptions/write
  '/v1/subscriptions/{subscriptionId}/invites':
    parameters:
      - $ref: '#/components/parameters/subscriptionId'
    post:
      operationId: postSubscriptionInvite
      tags:
        - invite
      description: Crée une invitation à une souscription
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/SubscriptionInvite.v1.json
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionInviteResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée une invitation à une souscription
      security:
        - toaztr_auth:
            - subscriptions/write
    get:
      summary: Liste les invitations à la souscription
      operationId: getSubscriptionInvites
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionInviteResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      description: Liste les invitations à la souscription
      security:
        - toaztr_auth:
            - subscriptions/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      tags:
        - invite
  '/v1/subscriptions/{subscriptionId}/invites/{id}':
    parameters:
      - $ref: '#/components/parameters/id'
      - $ref: '#/components/parameters/subscriptionId'
    get:
      operationId: getSubscriptionInviteById
      description: Retourne une invitation à la souscription par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionInviteResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne une invitation à la souscription par ID
      security:
        - toaztr_auth:
            - subscriptions/read
      tags:
        - invite
    put:
      operationId: putSubscriptionInvite
      tags:
        - invite
      description: Mets à jour une invitation à une subscription par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/SubscriptionInvite.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionInviteResourceResponse'
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour une invitation à une souscription par ID
      security:
        - toaztr_auth:
            - subscriptions/write
    delete:
      operationId: deleteSubscriptionInvite
      tags:
        - invite
      description: Supprime une invitation à une souscription par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime une invitation à une souscription par ID
      security:
        - toaztr_auth:
            - susbcriptions/write
  '/v1/subscriptions/{subscriptionId}/request-logs':
    parameters:
      - $ref: '#/components/parameters/subscriptionId'
    get:
      summary: Liste les requêtes associées à la souscription
      operationId: getSubscriptionRequestLogs
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionRequestLogResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      description: Liste les requêtes associées à la souscription
      security:
        - toaztr_auth:
            - subscriptions/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      tags:
        - request_log
  '/v1/subscriptions/{subscriptionId}/usage-records':
    parameters:
      - $ref: '#/components/parameters/subscriptionId'
    get:
      summary: Liste les enregistrements de l'utilisation d'une souscription
      operationId: getSubscriptionUsageRecords
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionUsageRecordResourcePaginatedListResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      description: Liste les enregistrements de l'utilisation d'une souscription
      security:
        - toaztr_auth:
            - subscriptions/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      tags:
        - usage_record
  /v1/redeem-subscription-invite:
    post:
      operationId: redeemSubscriptionInvite
      tags:
        - invite
      description: Utilise une invitation
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/RedeemSubscriptionInviteParameters.v1.json
      responses:
        '201':
          description: Created
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Utilise une invitation
      security:
        - toaztr_auth:
            - subscriptions/write
  /v1/license:
    get:
      operationId: getLicense
      description: Retourne la license en cours de l'utilisateur
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LicenseResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne la license en cours de l'utilisateur
      security:
        - toaztr_auth:
          - license/read
      tags:
        - license
    delete:
      operationId: deleteLicense
      tags:
        - license
      description: Supprime la license en cours de l'utilisateur
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime la license en cours de l'utilisateur
      security:
        - toaztr_auth:
            - license/write
  /v1/license/name:
    put:
      operationId: putLicenseName
      tags:
        - license
      description: Mets à jour le nom d'une license
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/SetNameParameters.v1.json
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LicenseResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour le nom d'une license
      security:
        - toaztr_auth:
            - license/write
  /v1/license/members:
    get:
      summary: Liste les membres associés à la license de l'utilisateur
      operationId: getLicenseMembers
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LicenseMembersResponse'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      description: Liste les membres associés à la license de l'utilisateur
      security:
        - toaztr_auth:
          - license/read
      parameters: 
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[cursor]'
        - $ref: '#/components/parameters/ordering'
      tags:
        - license
servers:
  - description: Serveur de production
    url: 'https://api.toaztr.com'
  - description: Server de sandbox
    url: 'https://api.sandbox.toaztr.com'
